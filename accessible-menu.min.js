!function(u){u.fn.accessibleMenu=function(e){this.each(function(){function a(e){if(0==e)u(o+' button[aria-expanded="true"]').each(function(){u(this).attr("aria-expanded",!1),n(u(this),"close")});else{u(o+" > ul > li ".repeat(function(e){var t=0;for(i=0;i<e.parents().length;i++)if("NAV"==e.parents()[i].tagName){t=i/2;break}return t}(e))+' button[aria-expanded="true"]').not(e).each(function(){u(this).attr("aria-expanded",!1),n(u(this),"close")});var t="true"!=e.attr("aria-expanded");e.attr("aria-expanded",t),n(e,"toggle")}}function n(e,t){switch(r.animation){case"fade":"close"==t?e.next("ul").fadeOut(r.animationSpeed):"open"==t?e.next("ul").fadeIn(r.animationSpeed):e.next("ul").fadeToggle(r.animationSpeed);break;case"slide":"close"==t?e.next("ul").slideUp(r.animationSpeed):"open"==t?e.next("ul").slideDown(r.animationSpeed):e.next("ul").slideToggle(r.animationSpeed);break;default:"close"==t?e.next("ul").hide():"open"==t?e.next("ul").show():e.next("ul").toggle()}}var o="#"+this.id,r=u.extend({},{animation:"none",animationSpeed:"fast"},e);u(o+' button[aria-expanded="false"]').next("ul").each(function(){u(this).hide()}),u("body").on("click",o+" button",function(){a(u(this))}),u(this).keydown(function(e){e=e||window.event;var t=u(":focus");if("27"==e.keyCode)if(t.is('button[aria-expanded="true"]'))a(t);else{var n=t.parent().parent().parent().children("button");n.focus(),a(n)}else"37"==e.keyCode||"38"==e.keyCode?(e.preventDefault(),t.parent().prev("li").children("a, button").focus()):"39"==e.keyCode||"40"==e.keyCode?(e.preventDefault(),t.is('button[aria-expanded="true"]')?t.next("ul").children("li:first-child").children("a, button").focus():t.parent().next("li").children("a, button").focus()):"36"==e.keyCode?(e.preventDefault(),t.parent().parent().children("li:first-child").children("a, button").focus()):"35"==e.keyCode&&(e.preventDefault(),t.parent().parent().children("li:last-child").children("a, button").focus())}),u(o+", "+o+" *").focusout(function(e){u(e.relatedTarget).is(o+", "+o+" *")||a(!1)})}),String.prototype.repeat||(String.prototype.repeat=function(e){"use strict";if(null==this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if((e=+e)!=e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e==1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0==t.length||0==e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var n=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+=t.substring(0,n-t.length)})}}(jQuery);